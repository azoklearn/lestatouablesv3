<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LDermo - Les Tatouables</title>
    <meta name="description" content="LDermo - Spécialiste en tatouage réparateur et dermopigmentation. Reconstruction aréolaire, cicatrices, vergetures.">
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* Amélioration de la lisibilité des titres et libellés du portfolio */
        #portfolio .section-subtitle {
            font-size: 1.75rem;
            font-weight: 800;
            color: #f5f5f5;
            letter-spacing: 0.3px;
            text-shadow: 0 2px 8px rgba(0,0,0,0.6);
        }
        #portfolio .portfolio-overlay h3 {
            font-size: 1.5rem;
            line-height: 1.2;
            font-weight: 800;
            color: #ffffff;
            text-shadow: 0 2px 10px rgba(0,0,0,0.65);
        }
        #portfolio .portfolio-overlay p {
            font-size: 1.1rem;
            font-weight: 700;
            color: #ffffff;
            text-shadow: 0 2px 8px rgba(0,0,0,0.6);
        }
        #portfolio .portfolio-link {
            font-size: 0.98rem;
            font-weight: 700;
            text-shadow: 0 2px 6px rgba(0,0,0,0.55);
        }
        
        /* Styles pour les menus de contact */
        .contact-menu-item {
            display: block;
            padding: 10px 15px;
            color: #333;
            text-decoration: none;
            border-bottom: 1px solid #eee;
            transition: background-color 0.2s;
        }
        .contact-menu-item:hover {
            background-color: #f5f5f5;
            color: #2c3e50;
        }
        .contact-menu-item:last-child {
            border-bottom: none;
        }
        .contact-menu-item i {
            margin-right: 8px;
            width: 16px;
        }
        
        
        /* Responsive pour mobile */
        @media (max-width: 768px) {
            .contact-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .contact-dropdown {
                margin-bottom: 10px;
                margin-right: 0 !important;
            }
            
            .contact-menu {
                position: relative !important;
                display: none;
                margin-top: 10px;
                box-shadow: none;
                border: none;
                background: transparent;
            }
            
            .contact-menu-item {
                background: #2c3e50;
                color: white;
                margin: 5px 0;
                border-radius: 4px;
                text-align: center;
            }
            
            /* Images des créations plus petites sur mobile */
            .portfolio .portfolio-image img {
                max-width: 120px !important;
                height: auto !important;
                border: none !important;
                outline: none !important;
                border-radius: 0 !important;
            }
            
            .portfolio .portfolio-item {
                margin-bottom: 2px !important;
                border: none !important;
                box-shadow: none !important;
                background: transparent !important;
                border-radius: 0 !important;
            }
            
            /* Forcer l'espacement réduit sur tous les éléments portfolio */
            .portfolio .portfolio-grid {
                gap: 8px !important;
                row-gap: 8px !important;
            }
            
            .portfolio .portfolio-item * {
                margin-bottom: 0 !important;
            }
            
            .portfolio .portfolio-image {
                border: none !important;
                border-radius: 0 !important;
                overflow: visible !important;
            }
            
            /* Forcer la suppression des bordures sur tous les éléments portfolio */
            .portfolio * {
                border: none !important;
                box-shadow: none !important;
            }
            
            /* Supprimer complètement les conteneurs gris */
            .portfolio .portfolio-item,
            .portfolio .portfolio-image,
            .portfolio .portfolio-overlay {
                background: transparent !important;
                border: none !important;
                box-shadow: none !important;
                padding: 0 !important;
                margin: 0 !important;
            }
            
            /* Forcer les images à être directement visibles */
            .portfolio .portfolio-image {
                display: block !important;
                background: transparent !important;
            }
            
            .portfolio-grid {
                grid-template-columns: repeat(2, 1fr) !important;
                gap: 8px !important;
                row-gap: 8px !important;
                display: grid !important;
                justify-content: center !important;
                justify-items: center !important;
            }
            
            /* Centrer les créations de LDermo sur mobile */
            .portfolio {
                display: flex !important;
                justify-content: center !important;
                align-items: center !important;
                flex-direction: column !important;
            }
            
            .portfolio .container {
                display: flex !important;
                justify-content: center !important;
                align-items: center !important;
                flex-direction: column !important;
                width: 100% !important;
            }
            
            .portfolio-section {
                display: flex !important;
                justify-content: center !important;
                align-items: center !important;
                width: 100% !important;
            }
            
            /* Styles pour les sous-menus sur mobile */
            .nav-submenu {
                position: static !important;
                display: none !important;
                background: #1a1a1a !important;
                border-radius: 0 !important;
                box-shadow: none !important;
                margin-top: 5px !important;
                min-width: auto !important;
                width: 100% !important;
                opacity: 1 !important;
                visibility: visible !important;
                left: auto !important;
                top: auto !important;
                z-index: 999 !important;
            }
            
            .nav-menu li:hover .nav-submenu,
            .nav-menu li.active .nav-submenu {
                display: block !important;
            }
            
            .nav-submenu .nav-link {
                display: block !important;
                padding: 10px 15px !important;
                font-size: 13px !important;
                border-bottom: 1px solid #333333 !important;
                color: #ffffff !important;
                text-decoration: none !important;
                width: 100% !important;
                box-sizing: border-box !important;
                background: transparent !important;
            }
            
            .nav-submenu .nav-link:last-child {
                border-bottom: none !important;
            }
            
            .nav-submenu li {
                display: block !important;
                width: 100% !important;
            }
            
            .contact-menu-item {
                background: #1a1a1a;
                color: white;
                margin: 5px 0;
                border-radius: 4px;
                text-align: center;
            }
            
            /* S'assurer que le menu hamburger permet l'affichage des sous-menus */
            .nav-menu {
                overflow: visible !important;
            }
        }
        
        /* Styles pour les titres de la section hero */
        .hero h1 {
            color: #ffffff !important;
            text-shadow: 0 2px 10px rgba(0,0,0,0.8);
            font-weight: 700;
        }
        .hero p {
            color: #ffffff !important;
            text-shadow: 0 2px 8px rgba(0,0,0,0.7);
            font-weight: 500;
        }
        
        /* Forcer l'espacement réduit globalement */
        .portfolio .portfolio-item {
            margin: 0 !important;
            padding: 0 !important;
        }
        
        .portfolio .portfolio-image {
            margin: 0 !important;
            padding: 0 !important;
        }
        
        .portfolio .portfolio-overlay {
            margin: 0 !important;
            padding: 0 !important;
        }
        
        .portfolio .portfolio-overlay h3,
        .portfolio .portfolio-overlay p {
            margin: 0 !important;
            padding: 0 !important;
        }
        
        /* Styles globaux pour forcer l'espacement réduit */
        .portfolio * {
            margin: 0 !important;
            padding: 0 !important;
        }
        
        .portfolio .portfolio-grid {
            gap: 8px !important;
            row-gap: 8px !important;
        }
        
        .portfolio .portfolio-item {
            margin-bottom: 8px !important;
        }
        
        /* Supprimer complètement les overlays */
        .portfolio .portfolio-overlay {
            display: none !important;
            height: 0 !important;
            width: 0 !important;
            margin: 0 !important;
            padding: 0 !important;
        }
        
        /* Forcer les images à prendre tout l'espace */
        .portfolio .portfolio-image {
            height: auto !important;
            min-height: 0 !important;
        }
        
        .portfolio .portfolio-image img {
            display: block !important;
            width: 100% !important;
            height: auto !important;
        }
        
        /* Personnalisation de la barre de défilement */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #2c3e50;
        }
        ::-webkit-scrollbar-thumb {
            background: #34495e;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #2c3e50;
        }
        
        /* Lightbox styles */
        .lightbox {
            display: none;
            position: fixed;
            z-index: 9999;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.9);
            cursor: pointer;
        }
        
        .lightbox-content {
            position: absolute;
            top: 0 !important;
            left: 0 !important;
            transform: none !important;
            width: 100vw !important;
            height: 100vh !important;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .lightbox img {
            max-width: 100vw !important;
            max-height: 100vh !important;
            width: 100vw !important;
            height: 100vh !important;
            border-radius: 0;
            object-fit: contain;
        }
        
        .lightbox-close {
            position: absolute;
            top: 20px;
            right: 30px;
            color: white;
            font-size: 40px;
            font-weight: bold;
            cursor: pointer;
        }
        
        .lightbox-close:hover {
            color: #ccc;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container" style="position:relative;">
            <div class="nav-left">
                <a href="https://www.instagram.com/sinkolor.tattoo/" target="_blank" class="nav-link" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                <a href="https://www.facebook.com/p/Sinkolortattoo-61557216517025/" target="_blank" class="nav-link" aria-label="Facebook"><i class="fab fa-facebook"></i></a>
                <a href="tel:0602120638" class="nav-link" aria-label="Téléphone"><i class="fas fa-phone"></i></a>
            </div>
            <div class="nav-center">
            </div>
            <ul id="menu" class="nav-menu">
                <li><a href="index.html" class="nav-link">Retour à la page d'accueil</a></li>
                <li><a href="ldermo-tarifs.html" class="nav-link">Tarification</a></li>
            </ul>
            <div class="hamburger" aria-label="Menu" aria-expanded="false" aria-controls="menu">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
        </div>
    </nav>


    <!-- LDermo Présentation -->
    <section id="ldermo-presentation" class="about">
        <div class="container">
            <div class="about-content">
                <div class="about-image">
                    <img src="images/ldermo.jpeg" alt="LDermo - Dermopigmentation" class="about-photo">
                </div>
                <div class="about-text">
                    <h2>LDermo</h2>
                    <p>Riche de plusieurs mois de formation sous le tutorat d'Anna Dermo, numéro 1 en France du tatouage réparateur et créatrice de la méthode Skin correct, Ldermo a pu recevoir les meilleurs outils et conseils visant à garantir des résultats époustouflants à sa clientèle.</p>
                    <p>Que votre projet concerne des vergetures, une cicatrice, une peau brûlée ou greffée ou encore une reconstruction de l'aréole mammaire, Ldermo prendra le temps, lors d'une première consultation, de définir avec vous la méthode la plus adaptée à vos besoins pour que votre séance de tatouage et son résultat soient à la hauteur de vos attentes.</p>
                    <p>Grâce à sa douceur, son empathie, sa bienveillance et ses explications, LDermo saura répondre à toutes vos questions et vous rassurer afin de chasser toute anxiété avant votre séance.</p>
                    <div class="contact-buttons" style="margin-top:1rem;">
                        <div class="contact-dropdown" style="position: relative; display: inline-block; margin-right:0.5rem;">
                            <button class="btn btn-primary contact-toggle" onclick="toggleContactMenu('ldermo')">
                                <i class="fas fa-envelope"></i> Contact
                                <i class="fas fa-chevron-down" style="margin-left: 5px;"></i>
                            </button>
                            <div id="ldermo-contact-menu" class="contact-menu" style="display: none; position: absolute; top: 100%; left: 0; background: white; border: 1px solid #ddd; border-radius: 4px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); z-index: 1000; min-width: 200px;">
                                <a href="https://www.facebook.com/p/Sinkolortattoo-61557216517025/" target="_blank" class="contact-menu-item">
                                    <i class="fab fa-facebook"></i> Facebook
                                </a>
                                <a href="https://www.instagram.com/sinkolor.tattoo/" target="_blank" class="contact-menu-item">
                                    <i class="fab fa-instagram"></i> Instagram
                                </a>
                                <a href="tel:0602120638" class="contact-menu-item">
                                    <i class="fas fa-phone"></i> Appeler
                                </a>
                            </div>
                        </div>
                        <a href="ldermo-tarifs.html" class="btn btn-secondary" style="display:inline-block;">Tarification</a>
                    </div>
                </div>
            </div>
        </div>
    </section>


    <!-- Portfolio Section -->
    <section id="portfolio" class="portfolio">
        <div class="container">
            <p class="section-subtitle">Découvrez les réalisations de LDermo</p>
            
            <div class="portfolio-controls" id="portfolioControls" style="display:flex; justify-content:center; margin-bottom: 3rem; margin-top: 2rem; gap: 1.5rem; padding: 1.5rem 0;">
                <button id="toggleEditPortfolio" class="btn btn-primary" type="button" style="background: linear-gradient(135deg, #2c3e50, #34495e); border: none; padding: 12px 24px; border-radius: 25px; font-weight: 600; box-shadow: 0 4px 15px rgba(44, 62, 80, 0.3); transition: all 0.3s ease;">
                    <i class="fas fa-edit" style="margin-right: 8px;"></i>Gérer les créations
                </button>
                <button id="addCreation" class="btn btn-secondary" type="button" style="display:none; background: linear-gradient(135deg, #27ae60, #2ecc71); border: none; padding: 12px 24px; border-radius: 25px; font-weight: 600; box-shadow: 0 4px 15px rgba(39, 174, 96, 0.3); transition: all 0.3s ease;">
                    <i class="fas fa-plus" style="margin-right: 8px;"></i>Ajouter une création
                </button>
            </div>
            
            <!-- LDermo -->
            <div id="portfolio-ldermo" class="portfolio-section">
                <div class="portfolio-grid" id="portfolioGrid">
                    <div class="portfolio-item" data-category="dermo">
                        <div style="text-align:center; font-weight:600; margin-bottom:8px;">
                            <span style="display:inline-block; padding:6px 10px; background:#f2f2f2; border-radius:999px; color:#333; font-size:0.95rem;">Avant</span>
                        </div>
                        <div class="portfolio-image">
                            <img src="images/image19.jpeg" alt="Avant - Reconstruction mammaire" loading="lazy">
                        </div>
                        <div class="portfolio-overlay">
                            <h3>Avant</h3>
                            <p>Reconstruction mammaire</p>
                            <a href="#contact" class="portfolio-link"><i class="fas fa-envelope"></i> Demander infos</a>
                        </div>
                    </div>
                    <div class="portfolio-item" data-category="dermo">
                        <div style="text-align:center; font-weight:600; margin-bottom:8px;">
                            <span style="display:inline-block; padding:6px 10px; background:#f2f2f2; border-radius:999px; color:#333; font-size:0.95rem;">Après</span>
                        </div>
                        <div class="portfolio-image">
                            <img src="images/image20.jpeg" alt="Après - Reconstruction mammaire" loading="lazy">
                        </div>
                        <div class="portfolio-overlay">
                            <h3>Après</h3>
                            <p>Reconstruction mammaire</p>
                            <a href="#contact" class="portfolio-link"><i class="fas fa-envelope"></i> Demander infos</a>
                        </div>
                    </div>
                </div>

                <div class="portfolio-cta">
                   
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="contact">
        <div class="container">
            <h2 class="section-title">Contact</h2>
            <p class="section-subtitle">Parlons de votre projet</p>
            
            <div class="contact-content">
                <div class="contact-info">
                    <div class="contact-item">
                        <div class="contact-icon">
                            <i class="fas fa-phone"></i>
                        </div>
                        <div class="contact-details">
                            <h3>Téléphone</h3>
                            <p><a href="tel:0602120638">0602120638</a></p>
                        </div>
                    </div>
                    <div class="contact-item">
                        <div class="contact-icon">
                            <i class="fas fa-map-marker-alt"></i>
                        </div>
                        <div class="contact-details">
                            <h3>Adresse du salon</h3>
                            <p>9Av. 1ère Armée Françaises 44-45<br>54200 Toul<br>(à 20 min à pied de la gare et 10 minutes à pied de la gare routière)</p>
                        </div>
                    </div>
                </div>
                
                <div class="contact-form">
                    <h3>Demander un devis</h3>
                    <form id="contactForm" method="POST" action="https://formsubmit.co/lestatouables@gmail.com">
                        <input type="hidden" name="_subject" value="Nouvelle demande de rendez-vous - LDermo">
                        <input type="hidden" name="_template" value="table">
                        <input type="hidden" name="_captcha" value="false">
                        <div class="form-group">
                            <input type="text" id="name" name="name" placeholder="Votre nom" required>
                        </div>
                        <div class="form-group">
                            <input type="email" id="email" name="email" placeholder="Votre email" required>
                        </div>
                        <div class="form-group">
                            <textarea id="message" name="message" placeholder="Décrivez votre projet de tatouage réparateur" rows="5" required></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary">Envoyer la demande</button>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo">
                    <h3>Les Tatouables</h3>
                    <p>Salon de Tatoueurs Professionnels</p>
                </div>
                <div class="footer-social">
                    <a href="https://www.instagram.com/sinkolor.tattoo/" target="_blank" class="social-link">
                        <i class="fab fa-instagram"></i>
                    </a>
                    <a href="https://www.facebook.com/p/Sinkolortattoo-61557216517025/" target="_blank" class="social-link">
                        <i class="fab fa-facebook"></i>
                    </a>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 Les Tatouables . Tous droits réservés.</p>
            </div>
        </div>
    </footer>

    <!-- Lightbox -->
    <div id="lightbox" class="lightbox">
        <span class="lightbox-close">&times;</span>
        <div class="lightbox-content">
            <img id="lightbox-img" src="" alt="">
        </div>
    </div>

    <script type="module" src="script-firebase.js"></script>
    <script type="module">
    // Système de gestion des créations avec Firebase
    import { firebaseService } from './firebase-config.js';
    
    (function(){
        const ADMIN_PASSWORD = '03KinepolisdDiva23!';
        const portfolioGrid = document.getElementById('portfolioGrid');
        const toggleBtn = document.getElementById('toggleEditPortfolio');
        const addBtn = document.getElementById('addCreation');
        
        let editMode = false;
        let isAuthorized = false;
        let creations = [];
        
        function hasSessionAuth(){
            try { return sessionStorage.getItem('ldermoPortfolioAuth') === '1'; } catch(e) { return false; }
        }
        
        function setSessionAuth(on){
            try {
                if (on) sessionStorage.setItem('ldermoPortfolioAuth','1');
                else sessionStorage.removeItem('ldermoPortfolioAuth');
            } catch(e) {}
        }
        
        function requestAuth(){
            if (isAuthorized || hasSessionAuth()) { isAuthorized = true; return true; }
            const pwd = prompt('Entrez le mot de passe pour éditer les créations :');
            if (pwd === ADMIN_PASSWORD){
                isAuthorized = true;
                setSessionAuth(true);
                return true;
            }
            alert('Mot de passe incorrect');
            return false;
        }
        
        async function loadCreations(){
            const defaultCreations = [
                { src: 'images/image19.jpeg', alt: 'Avant - Reconstruction mammaire', type: 'avant' },
                { src: 'images/image20.jpeg', alt: 'Après - Reconstruction mammaire', type: 'après' }
            ];
            
            try {
                const firebaseCreations = await firebaseService.getLDermoCreations();
                if (firebaseCreations.length > 0) {
                    return firebaseCreations;
                } else {
                    // Si pas de créations dans Firebase, ajouter les créations par défaut
                    for (const creation of defaultCreations) {
                        await firebaseService.addLDermoCreation(creation);
                    }
                    return defaultCreations;
                }
            } catch (error) {
                console.error('Erreur Firebase, fallback vers localStorage:', error);
                // Fallback vers localStorage
                try {
                    const raw = localStorage.getItem('ldermoCreations.v1');
                    if (raw) {
                        const parsed = JSON.parse(raw);
                        if (Array.isArray(parsed)) {
                            return parsed.length === 0 ? defaultCreations : parsed;
                        }
                    }
                } catch(e) {}
                return defaultCreations;
            }
        }
        
        async function saveCreations(creations){
            // Les créations sont maintenant gérées individuellement par Firebase
            // Cette fonction est gardée pour la compatibilité mais ne fait rien
        }
        
        function renderCreations(){
            portfolioGrid.innerHTML = '';
            creations.forEach((creation, index) => {
                const div = document.createElement('div');
                div.className = 'portfolio-item';
                div.setAttribute('data-category', 'dermo');
                div.style.marginBottom = '8px';
                
                if (creation.type) {
                    const labelDiv = document.createElement('div');
                    labelDiv.style.cssText = 'text-align:center; font-weight:600; margin-bottom:8px;';
                    
                    const span = document.createElement('span');
                    span.style.cssText = 'display:inline-block; padding:6px 10px; background:#f2f2f2; border-radius:999px; color:#333; font-size:0.95rem;';
                    span.textContent = creation.type.charAt(0).toUpperCase() + creation.type.slice(1);
                    
                    labelDiv.appendChild(span);
                    div.appendChild(labelDiv);
                }
                
                const portfolioImage = document.createElement('div');
                portfolioImage.className = 'portfolio-image';
                portfolioImage.style.marginBottom = '0';
                
                const img = document.createElement('img');
                img.src = creation.src;
                img.alt = creation.alt;
                img.loading = 'lazy';
                img.style.cursor = 'pointer';
                img.addEventListener('click', () => openLightbox(creation.src, creation.alt));
                
                portfolioImage.appendChild(img);
                
                div.appendChild(portfolioImage);
                
                if (editMode) {
                    const controls = document.createElement('div');
                    controls.style.cssText = 'position: absolute; top: 5px; right: 5px; display: flex; gap: 5px; z-index: 10;';
                    
                    const editButton = document.createElement('button');
                    editButton.className = 'btn btn-secondary';
                    editButton.type = 'button';
                    editButton.textContent = 'Modifier';
                    editButton.style.fontSize = '0.7rem';
                    editButton.style.padding = '2px 6px';
                    editButton.addEventListener('click', () => editCreation(creation.id || index));
                    
                    const deleteButton = document.createElement('button');
                    deleteButton.className = 'btn btn-secondary';
                    deleteButton.type = 'button';
                    deleteButton.textContent = 'Supprimer';
                    deleteButton.style.fontSize = '0.7rem';
                    deleteButton.style.padding = '2px 6px';
                    deleteButton.addEventListener('click', () => deleteCreation(creation.id || index));
                    
                    controls.appendChild(editButton);
                    controls.appendChild(deleteButton);
                    div.style.position = 'relative';
                    div.appendChild(controls);
                }
                
                portfolioGrid.appendChild(div);
            });
        }
        
        function setEditMode(on){
            editMode = !!on;
            addBtn.style.display = on ? '' : 'none';
            toggleBtn.textContent = on ? 'Terminer' : 'Gérer les créations';
            renderCreations();
        }
        
        async function editCreation(id){
            if (!requestAuth()) return;
            const creation = creations.find(c => c.id === id || creations.indexOf(c) === id);
            if (!creation) return;
            
            // Créer le modal d'édition
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.8);
                z-index: 1000;
                display: flex;
                align-items: center;
                justify-content: center;
            `;
            
            modal.innerHTML = `
                <div style="
                    background: white;
                    padding: 2rem;
                    border-radius: 15px;
                    max-width: 500px;
                    width: 90%;
                    max-height: 80vh;
                    overflow-y: auto;
                ">
                    <h3 style="margin-bottom: 1.5rem; color: #2c3e50;">Modifier la création</h3>
                    
                    <!-- Zone de drag & drop -->
                    <div id="dropZone" style="
                        border: 3px dashed #ddd;
                        border-radius: 10px;
                        padding: 2rem;
                        text-align: center;
                        margin-bottom: 1.5rem;
                        cursor: pointer;
                        transition: all 0.3s ease;
                        background: #f9f9f9;
                    ">
                        <i class="fas fa-cloud-upload-alt" style="font-size: 2rem; color: #ddd; margin-bottom: 1rem;"></i>
                        <p style="margin: 0; color: #666;">Glissez-déposez une nouvelle image ou cliquez pour sélectionner</p>
                        <input type="file" id="fileInput" accept="image/*" style="display: none;">
                    </div>
                    
                    <!-- Aperçu de l'image actuelle -->
                    <div id="currentImage" style="margin-bottom: 1.5rem;">
                        <p style="margin-bottom: 0.5rem; font-weight: 600; color: #333;">Image actuelle :</p>
                        <img id="currentImg" src="${creation.src}" style="max-width: 100%; max-height: 200px; border-radius: 8px;">
                    </div>
                    
                    <!-- Aperçu de la nouvelle image -->
                    <div id="imagePreview" style="display: none; margin-bottom: 1.5rem;">
                        <p style="margin-bottom: 0.5rem; font-weight: 600; color: #333;">Nouvelle image :</p>
                        <img id="previewImg" style="max-width: 100%; max-height: 200px; border-radius: 8px;">
                    </div>
                    
                    <!-- Formulaire -->
                    <div style="margin-bottom: 1.5rem;">
                        <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #333;">Description :</label>
                        <input type="text" id="creationAlt" value="${creation.alt}" style="
                            width: 100%;
                            padding: 0.8rem;
                            border: 2px solid #ddd;
                            border-radius: 8px;
                            font-size: 1rem;
                        ">
                    </div>
                    
                    <div style="margin-bottom: 1.5rem;">
                        <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #333;">Type (optionnel) :</label>
                        <select id="creationType" style="
                            width: 100%;
                            padding: 0.8rem;
                            border: 2px solid #ddd;
                            border-radius: 8px;
                            font-size: 1rem;
                        ">
                            <option value="">Sélectionner un type</option>
                            <option value="avant" ${creation.type === 'avant' ? 'selected' : ''}>Avant</option>
                            <option value="après" ${creation.type === 'après' ? 'selected' : ''}>Après</option>
                        </select>
                    </div>
                    
                    <!-- Boutons -->
                    <div style="display: flex; gap: 1rem; justify-content: flex-end;">
                        <button id="cancelBtn" style="
                            padding: 0.8rem 1.5rem;
                            border: 2px solid #ddd;
                            background: white;
                            border-radius: 8px;
                            cursor: pointer;
                            font-weight: 600;
                        ">Annuler</button>
                        <button id="saveBtn" style="
                            padding: 0.8rem 1.5rem;
                            background: linear-gradient(135deg, #2c3e50, #34495e);
                            color: white;
                            border: none;
                            border-radius: 8px;
                            cursor: pointer;
                            font-weight: 600;
                        ">Modifier</button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // Variables
            let selectedFile = null;
            const dropZone = document.getElementById('dropZone');
            const fileInput = document.getElementById('fileInput');
            const imagePreview = document.getElementById('imagePreview');
            const previewImg = document.getElementById('previewImg');
            const creationAlt = document.getElementById('creationAlt');
            const creationType = document.getElementById('creationType');
            const saveBtn = document.getElementById('saveBtn');
            const cancelBtn = document.getElementById('cancelBtn');
            
            // Fonction pour afficher l'aperçu
            function showPreview(file) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    previewImg.src = e.target.result;
                    imagePreview.style.display = 'block';
                };
                reader.readAsDataURL(file);
            }
            
            // Event listeners
            dropZone.addEventListener('click', () => fileInput.click());
            
            dropZone.addEventListener('dragover', (e) => {
                e.preventDefault();
                dropZone.style.borderColor = '#2c3e50';
                dropZone.style.background = '#f0f2f5';
            });
            
            dropZone.addEventListener('dragleave', (e) => {
                e.preventDefault();
                dropZone.style.borderColor = '#ddd';
                dropZone.style.background = '#f9f9f9';
            });
            
            dropZone.addEventListener('drop', (e) => {
                e.preventDefault();
                dropZone.style.borderColor = '#ddd';
                dropZone.style.background = '#f9f9f9';
                
                const files = e.dataTransfer.files;
                if (files.length > 0 && files[0].type.startsWith('image/')) {
                    selectedFile = files[0];
                    showPreview(selectedFile);
                }
            });
            
            fileInput.addEventListener('change', (e) => {
                if (e.target.files.length > 0) {
                    selectedFile = e.target.files[0];
                    showPreview(selectedFile);
                }
            });
            
            saveBtn.addEventListener('click', async () => {
                if (!creationAlt.value.trim()) {
                    alert('Veuillez entrer une description');
                    return;
                }
                
                try {
                    let newSrc = creation.src; // Garder l'ancienne image par défaut
                    
                    // Si une nouvelle image est sélectionnée, la convertir en base64
                    if (selectedFile) {
                        newSrc = await convertToBase64(selectedFile);
                    }
                    
                    const updatedCreation = {
                        src: newSrc,
                        alt: creationAlt.value.trim(),
                        type: creationType.value.trim()
                    };
                    
                    if (creation.id) {
                        await firebaseService.updateLDermoCreation(creation.id, updatedCreation);
                    } else {
                        // Fallback localStorage
                        const index = creations.indexOf(creation);
                        creations[index] = updatedCreation;
                        localStorage.setItem('ldermoCreations.v1', JSON.stringify(creations));
                    }
                    
                    await loadAndRenderCreations();
                    
                    // Fermer le modal
                    document.body.removeChild(modal);
                } catch (error) {
                    console.error('Erreur lors de la mise à jour:', error);
                    alert('Erreur lors de la mise à jour');
                }
            });
            
            cancelBtn.addEventListener('click', () => {
                document.body.removeChild(modal);
            });
            
            // Fermer avec Escape
            document.addEventListener('keydown', function escapeHandler(e) {
                if (e.key === 'Escape') {
                    document.body.removeChild(modal);
                    document.removeEventListener('keydown', escapeHandler);
                }
            });
        }
        
        async function deleteCreation(id){
            if (!requestAuth()) return;
            if (!confirm('Supprimer cette création ?')) return;
            
            try {
                const creation = creations.find(c => c.id === id || creations.indexOf(c) === id);
                if (creation && creation.id) {
                    // Suppression dans Firebase
                    await firebaseService.deleteLDermoCreation(creation.id);
                } else {
                    // Fallback localStorage
                    const index = creations.indexOf(creation);
                    creations.splice(index, 1);
                    localStorage.setItem('ldermoCreations.v1', JSON.stringify(creations));
                }
                await loadAndRenderCreations();
            } catch (error) {
                console.error('Erreur lors de la suppression:', error);
                alert('Erreur lors de la suppression');
            }
        }
        
        // Fonction pour convertir l'image en base64
        function convertToBase64(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.onload = () => resolve(reader.result);
                reader.onerror = reject;
                reader.readAsDataURL(file);
            });
        }
        
        // Fonction pour afficher le modal d'ajout
        function showAddCreationModal() {
            if (!requestAuth()) return;
            
            // Créer le modal
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.8);
                z-index: 1000;
                display: flex;
                align-items: center;
                justify-content: center;
            `;
            
            modal.innerHTML = `
                <div style="
                    background: white;
                    padding: 2rem;
                    border-radius: 15px;
                    max-width: 500px;
                    width: 90%;
                    max-height: 80vh;
                    overflow-y: auto;
                ">
                    <h3 style="margin-bottom: 1.5rem; color: #2c3e50;">Ajouter une nouvelle création</h3>
                    
                    <!-- Zone de drag & drop -->
                    <div id="dropZone" style="
                        border: 3px dashed #ddd;
                        border-radius: 10px;
                        padding: 2rem;
                        text-align: center;
                        margin-bottom: 1.5rem;
                        cursor: pointer;
                        transition: all 0.3s ease;
                        background: #f9f9f9;
                    ">
                        <i class="fas fa-cloud-upload-alt" style="font-size: 2rem; color: #ddd; margin-bottom: 1rem;"></i>
                        <p style="margin: 0; color: #666;">Glissez-déposez une image ici ou cliquez pour sélectionner</p>
                        <input type="file" id="fileInput" accept="image/*" style="display: none;">
                    </div>
                    
                    <!-- Aperçu de l'image -->
                    <div id="imagePreview" style="display: none; margin-bottom: 1.5rem;">
                        <img id="previewImg" style="max-width: 100%; max-height: 200px; border-radius: 8px;">
                    </div>
                    
                    <!-- Formulaire -->
                    <div style="margin-bottom: 1.5rem;">
                        <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #333;">Description :</label>
                        <input type="text" id="creationAlt" placeholder="Description de la création" style="
                            width: 100%;
                            padding: 0.8rem;
                            border: 2px solid #ddd;
                            border-radius: 8px;
                            font-size: 1rem;
                        ">
                    </div>
                    
                    <div style="margin-bottom: 1.5rem;">
                        <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #333;">Type (optionnel) :</label>
                        <select id="creationType" style="
                            width: 100%;
                            padding: 0.8rem;
                            border: 2px solid #ddd;
                            border-radius: 8px;
                            font-size: 1rem;
                        ">
                            <option value="">Sélectionner un type</option>
                            <option value="avant">Avant</option>
                            <option value="après">Après</option>
                        </select>
                    </div>
                    
                    <!-- Boutons -->
                    <div style="display: flex; gap: 1rem; justify-content: flex-end;">
                        <button id="cancelBtn" style="
                            padding: 0.8rem 1.5rem;
                            border: 2px solid #ddd;
                            background: white;
                            border-radius: 8px;
                            cursor: pointer;
                            font-weight: 600;
                        ">Annuler</button>
                        <button id="saveBtn" style="
                            padding: 0.8rem 1.5rem;
                            background: linear-gradient(135deg, #27ae60, #2ecc71);
                            color: white;
                            border: none;
                            border-radius: 8px;
                            cursor: pointer;
                            font-weight: 600;
                        ">Ajouter</button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // Variables
            let selectedFile = null;
            const dropZone = document.getElementById('dropZone');
            const fileInput = document.getElementById('fileInput');
            const imagePreview = document.getElementById('imagePreview');
            const previewImg = document.getElementById('previewImg');
            const creationAlt = document.getElementById('creationAlt');
            const creationType = document.getElementById('creationType');
            const saveBtn = document.getElementById('saveBtn');
            const cancelBtn = document.getElementById('cancelBtn');
            
            // Fonction pour afficher l'aperçu
            function showPreview(file) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    previewImg.src = e.target.result;
                    imagePreview.style.display = 'block';
                };
                reader.readAsDataURL(file);
            }
            
            // Event listeners
            dropZone.addEventListener('click', () => fileInput.click());
            
            dropZone.addEventListener('dragover', (e) => {
                e.preventDefault();
                dropZone.style.borderColor = '#27ae60';
                dropZone.style.background = '#f0f8f0';
            });
            
            dropZone.addEventListener('dragleave', (e) => {
                e.preventDefault();
                dropZone.style.borderColor = '#ddd';
                dropZone.style.background = '#f9f9f9';
            });
            
            dropZone.addEventListener('drop', (e) => {
                e.preventDefault();
                dropZone.style.borderColor = '#ddd';
                dropZone.style.background = '#f9f9f9';
                
                const files = e.dataTransfer.files;
                if (files.length > 0 && files[0].type.startsWith('image/')) {
                    selectedFile = files[0];
                    showPreview(selectedFile);
                }
            });
            
            fileInput.addEventListener('change', (e) => {
                if (e.target.files.length > 0) {
                    selectedFile = e.target.files[0];
                    showPreview(selectedFile);
                }
            });
            
            saveBtn.addEventListener('click', async () => {
                if (!selectedFile) {
                    alert('Veuillez sélectionner une image');
                    return;
                }
                
                if (!creationAlt.value.trim()) {
                    alert('Veuillez entrer une description');
                    return;
                }
                
                try {
                    // Convertir l'image en base64
                    const base64 = await convertToBase64(selectedFile);
                    
                    const newCreation = {
                        src: base64,
                        alt: creationAlt.value.trim(),
                        type: creationType.value.trim()
                    };
                    
                    await firebaseService.addLDermoCreation(newCreation);
                    await loadAndRenderCreations();
                    
                    // Fermer le modal
                    document.body.removeChild(modal);
                } catch (error) {
                    console.error('Erreur lors de l\'ajout:', error);
                    alert('Erreur lors de l\'ajout de la création');
                }
            });
            
            cancelBtn.addEventListener('click', () => {
                document.body.removeChild(modal);
            });
            
            // Fermer avec Escape
            document.addEventListener('keydown', function escapeHandler(e) {
                if (e.key === 'Escape') {
                    document.body.removeChild(modal);
                    document.removeEventListener('keydown', escapeHandler);
                }
            });
        }
        
        async function addNewCreation(){
            showAddCreationModal();
        }
        
        async function loadAndRenderCreations() {
            creations = await loadCreations();
            renderCreations();
        }
        
        toggleBtn.addEventListener('click', () => {
            if (!editMode) {
                if (!requestAuth()) return;
            }
            setEditMode(!editMode);
        });
        
        addBtn.addEventListener('click', addNewCreation);
        
        // Initialiser les créations au chargement de la page
        loadAndRenderCreations();
        
        // Écouter les changements en temps réel
        firebaseService.onLDermoCreationsChange((snapshot) => {
            const newCreations = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
            creations = newCreations;
            renderCreations();
        });
    })();
    
    // Fonctions pour la lightbox
    function openLightbox(src, alt) {
        const lightbox = document.getElementById('lightbox');
        const lightboxImg = document.getElementById('lightbox-img');
        const lightboxContent = document.querySelector('.lightbox-content');
        lightboxImg.src = src;
        lightboxImg.alt = alt;
        lightbox.style.display = 'block';
        lightboxContent.style.maxWidth = '100%';
        lightboxContent.style.maxHeight = '100%';
        lightboxContent.style.display = 'flex';
        lightboxContent.style.justifyContent = 'center';
        lightboxContent.style.alignItems = 'center';
        document.body.style.overflow = 'hidden';
    }
    
    function closeLightbox() {
        const lightbox = document.getElementById('lightbox');
        lightbox.style.display = 'none';
        document.body.style.overflow = 'auto';
    }
    
    // Event listeners pour la lightbox
    document.getElementById('lightbox').addEventListener('click', closeLightbox);
    document.querySelector('.lightbox-close').addEventListener('click', closeLightbox);
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
            closeLightbox();
        }
    });
    
    // Fonction pour gérer les menus de contact
    function toggleContactMenu(artist) {
        const menu = document.getElementById(artist + '-contact-menu');
        const allMenus = document.querySelectorAll('.contact-menu');
        
        // Fermer tous les autres menus
        allMenus.forEach(m => {
            if (m.id !== artist + '-contact-menu') {
                m.style.display = 'none';
            }
        });
        
        // Toggle le menu actuel
        if (menu.style.display === 'none' || menu.style.display === '') {
            menu.style.display = 'block';
        } else {
            menu.style.display = 'none';
        }
    }
    
    // Fermer les menus quand on clique ailleurs
    document.addEventListener('click', function(event) {
        if (!event.target.closest('.contact-dropdown')) {
            const allMenus = document.querySelectorAll('.contact-menu');
            allMenus.forEach(menu => {
                menu.style.display = 'none';
            });
        }
    });
    </script>
    
    <script>
    // Mobile Navigation Toggle
    const hamburger = document.querySelector('.hamburger');
    const navMenu = document.querySelector('.nav-menu');

    if (hamburger && navMenu) {
        hamburger.setAttribute('aria-label', 'Ouvrir le menu');
        hamburger.setAttribute('aria-expanded', 'false');
        hamburger.setAttribute('aria-controls', 'menu');

        // Gestionnaire pour clic et toucher (mobile)
        function handleHamburgerClick(e) {
            e.preventDefault();
            e.stopPropagation();
            const isActive = hamburger.classList.toggle('active');
            navMenu.classList.toggle('active');
            hamburger.setAttribute('aria-expanded', isActive ? 'true' : 'false');
            hamburger.setAttribute('aria-label', isActive ? 'Fermer le menu' : 'Ouvrir le menu');
        }
        
        // Ajouter les événements pour clic et toucher
        hamburger.addEventListener('click', handleHamburgerClick);
        hamburger.addEventListener('touchstart', handleHamburgerClick);

        // Close menu only when clicking on a leaf link (sans sous-menu) ou un lien de sous-menu
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', (e) => {
                const li = link.parentElement;
                const hasDirectSubmenu = li && li.querySelector(':scope > .nav-submenu');
                if (hasDirectSubmenu) {
                    // Parent avec sous-menu: ne pas fermer ici (le toggle gère l'ouverture)
                    return;
                }
                // Lien de sous-menu ou lien simple: fermer le panneau
                hamburger.classList.remove('active');
                navMenu.classList.remove('active');
                hamburger.setAttribute('aria-expanded', 'false');
                hamburger.setAttribute('aria-label', 'Ouvrir le menu');
            });
        });

        // Toggle sous-menus dans le panneau hamburger (tous écrans)
        document.querySelectorAll('.nav-menu > li > a').forEach(anchor => {
            anchor.addEventListener('click', (e) => {
                const parent = anchor.parentElement;
                const submenu = parent.querySelector('.nav-submenu');
                if (submenu) {
                    e.preventDefault();
                    e.stopPropagation();
                    
                    // Fermer tous les autres sous-menus
                    document.querySelectorAll('.nav-menu > li').forEach(otherLi => {
                        if (otherLi !== parent) {
                            otherLi.classList.remove('is-open');
                        }
                    });
                    
                    // Toggle le sous-menu actuel
                    parent.classList.toggle('is-open');
                    console.log('Sous-menu togglé:', parent.classList.contains('is-open'));
                }
            });
        });
    }

    // Smooth scrolling for navigation links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        });
    });

    // Navbar background change on scroll
    window.addEventListener('scroll', () => {
        const navbar = document.querySelector('.navbar');
        if (window.scrollY > 100) {
            navbar.style.background = 'rgba(15, 15, 15, 0.98)';
            navbar.style.boxShadow = '0 2px 20px rgba(0, 0, 0, 0.5)';
        } else {
            navbar.style.background = 'rgba(15, 15, 15, 0.95)';
            navbar.style.boxShadow = 'none';
        }
    });
    </script>
</body>
</html>
